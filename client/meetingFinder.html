<template name="MeetingFinder">
  <h2>Meeting Finder</h2>

  <p>Find Narcotics Anonymous (NA), Alcholics Anonymous (AA), Chemically Dependent Anonymous (CDA), and SMART Recovery Meetings with this one simple tool!</p>

  <form action="#" id="meeting-finder-location-entry">
    <div class="mdl-textfield mdl-js-textfield">
      <select id="meeting-finder-form-state" name="state">
        {{>StateSelectOptions}}
      </select>
      <label class="mdl-textfield__label" for="meeting-finder-form-state">State</label>
    </div>
    <br>
    <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">
      Search
    </button>
  </form>

  {{#if searching}}
    <div id="p2" class="mdl-progress mdl-js-progress mdl-progress__indeterminate"></div>
  {{else}}
    {{#if searchResults.count}}
      <table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp">
        <thead>
          <tr>
            <th class="mdl-data-table__cell--non-numeric">Type</th>
            <th class="mdl-data-table__cell--non-numeric">Name</th>
            <th class="mdl-data-table__cell--non-numeric">City/Area</th>
            <th class="mdl-data-table__cell--non-numeric">Phone</th>
            <th class="mdl-data-table__cell--non-numeric">Website</th>
            <th class="mdl-data-table__cell--non-numeric">Time</th>
            <th class="mdl-data-table__cell--non-numeric">Location</th>
            <th class="mdl-data-table__cell--non-numeric">Contact</th>
            <th class="mdl-data-table__cell--non-numeric">State</th>
            <th class="mdl-data-table__cell--non-numeric">Additional Info</th>
          </tr>
        </thead>
        <tbody>
          {{#each meeting in searchResults}}
            <tr>
              <td class="mdl-data-table">{{meeting.type}}</td>
              <td class="mdl-data-table">{{meeting.name}}</td>
              <td class="mdl-data-table">
                {{#if meeting.city}}
                  {{meeting.city}}
                {{else}}
                  {{meeting.area}}
                {{/if}}
              </td>
              <td class="mdl-data-table">{{{meeting.phone}}}</td>
              <td class="mdl-data-table">
                <a href="{{meeting.website}}">{{meeting.website}}</a>
              </td>
              <td class="mdl-data-table">{{meeting.time}}</td>
              <td class="mdl-data-table">{{meeting.location}}</td>
              <td class="mdl-data-table">{{{meeting.contact}}}</td>
              <td class="mdl-data-table">{{meeting.state}}</td>
              <td class="mdl-data-table">{{meeting.addlInfo}}</td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    {{else}}
      <p>No results at this time for this state. Please use the below resources!</p>
    {{/if}}
  {{/if}}



  <div>
    <p>
      Sources:

      <ul>
        <li><a href="http://www.na.org/meetingsearch/">Narcotics Anonymous - NA</a></li>
        <li><a href="http://www.aa.org/pages/en_US/find-aa-resources">Alcoholics Anonymous - AA</a></li>
        <li><a href="http://cdawebsitedev.com/meetings.html#">Chemically Dependent Anonymous - CDA</a></li>
        <li><a href="http://www.smartrecovery.org/meetings_db/view/">SMART Recovery</a></li>
      </ul>
    </p>
  </div>
</template>
